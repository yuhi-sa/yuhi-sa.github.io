class CodeCopyManager{constructor(){this.init()}init(){document.querySelectorAll("pre:has(code)").forEach(e=>{this.addCopyButton(e)})}addCopyButton(e){const t=document.createElement("button");t.className="copy-code-button",t.innerHTML=`
      <i class="far fa-copy" aria-hidden="true"></i>
      <span class="copy-text">Copy</span>
    `,t.setAttribute("aria-label","Copy code to clipboard"),t.setAttribute("title","Copy code"),e.style.position="relative",e.appendChild(t),t.addEventListener("click",async()=>{await this.copyCode(t,e)})}async copyCode(e,t){const n=t.querySelector("code");if(!n)return;const s=n.innerText||n.textContent;try{await navigator.clipboard.writeText(s),this.showSuccess(e)}catch(t){console.warn("Clipboard API failed, trying fallback:",t),this.fallbackCopy(s,e)}}fallbackCopy(e,t){const n=document.createElement("textarea");n.value=e,n.style.position="fixed",n.style.opacity="0",document.body.appendChild(n),n.select();try{document.execCommand("copy"),this.showSuccess(t)}catch(e){console.error("Failed to copy text:",e),this.showError(t)}finally{document.body.removeChild(n)}}showSuccess(e){const t=e.querySelector("i"),n=e.querySelector(".copy-text");t.className="fas fa-check",n.textContent="Copied!",e.classList.add("copy-success"),e.setAttribute("aria-label","Code copied to clipboard"),setTimeout(()=>{t.className="far fa-copy",n.textContent="Copy",e.classList.remove("copy-success"),e.setAttribute("aria-label","Copy code to clipboard")},2e3)}showError(e){const t=e.querySelector("i"),n=e.querySelector(".copy-text");t.className="fas fa-times",n.textContent="Failed",e.classList.add("copy-error"),setTimeout(()=>{t.className="far fa-copy",n.textContent="Copy",e.classList.remove("copy-error")},2e3)}}document.addEventListener("DOMContentLoaded",()=>{new CodeCopyManager})