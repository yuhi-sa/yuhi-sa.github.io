class DarkModeManager{constructor(){this.storageKey="theme-preference",this.toggleButton=document.getElementById("darkModeToggle"),this.html=document.documentElement,this.init()}init(){this.setTheme(this.getTheme()),this.updateToggleButton(),this.toggleButton&&this.toggleButton.addEventListener("click",()=>this.toggleTheme()),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{localStorage.getItem(this.storageKey)||this.setTheme(e.matches?"dark":"light")})}getTheme(){const e=localStorage.getItem(this.storageKey);return e?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}setTheme(e){this.html.setAttribute("data-theme",e),localStorage.setItem(this.storageKey,e),this.updateToggleButton(e)}toggleTheme(){const e=this.html.getAttribute("data-theme"),t=e==="dark"?"light":"dark";this.setTheme(t)}updateToggleButton(e=null){if(!this.toggleButton)return;const t=e||this.html.getAttribute("data-theme"),n=this.toggleButton.querySelector("#darkModeIcon"),s=this.toggleButton.querySelector(".toggle-text:not(.toggle-light)"),o=this.toggleButton.querySelector(".toggle-light");n&&(t==="dark"?n.className="fas fa-sun":n.className="fas fa-moon"),s&&o&&(t==="dark"?(s.style.display="none",o.style.display="flex"):(s.style.display="flex",o.style.display="none"));const i=t==="dark"?"ライトモードに切り替え":"ダークモードに切り替え";this.toggleButton.setAttribute("aria-label",i),this.toggleButton.setAttribute("title",i)}}document.addEventListener("DOMContentLoaded",()=>{new DarkModeManager}),(()=>{const e=localStorage.getItem("theme-preference")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");document.documentElement.setAttribute("data-theme",e)})()