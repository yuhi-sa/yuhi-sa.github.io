<!doctype html><html lang=en dir=ltr data-theme=light><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=format-detection content="telephone=no"><meta name=robots content="
    index
  
  ,follow"><meta name=description content="How to use Google's mtail to parse log files and expose Prometheus-format metrics via a /metrics endpoint, with mtail program syntax and Docker setup examples."><link rel=canonical href=https://yuhi-sa.github.io/en/posts/20231124_mtail/1/><meta property="og:type" content="
    article
  "><meta property="og:title" content="
    Generating Prometheus Metrics from Logs with mtail
  "><meta property="og:description" content="How to use Google's mtail to parse log files and expose Prometheus-format metrics via a /metrics endpoint, with mtail program syntax and Docker setup examples."><meta property="og:url" content="https://yuhi-sa.github.io/en/posts/20231124_mtail/1/"><meta property="og:site_name" content="tomato blog"><meta property="og:locale" content="en"><meta property="og:image" content="https://yuhi-sa.github.io/ogp.jpeg"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta property="article:published_time" content="2023-11-24T09:00:23+09:00"><meta property="article:modified_time" content="2026-02-14T00:31:41+09:00"><meta property="article:tag" content="Monitoring"><meta property="article:tag" content="Prometheus"><meta property="article:tag" content="Logging"><meta property="article:section" content="posts"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="
    Generating Prometheus Metrics from Logs with mtail
  "><meta name=twitter:description content="How to use Google's mtail to parse log files and expose Prometheus-format metrics via a /metrics endpoint, with mtail program syntax and Docker setup examples."><meta name=twitter:image content="https://yuhi-sa.github.io/ogp.jpeg"><title>Generating Prometheus Metrics from Logs with mtail |
tomato blog</title><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preconnect href=https://cdn.jsdelivr.net crossorigin><link rel=alternate hreflang=ja href=https://yuhi-sa.github.io/posts/20231124_mtail/1/><link rel=alternate hreflang=en href=https://yuhi-sa.github.io/en/posts/20231124_mtail/1/><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Generating Prometheus Metrics from Logs with mtail","description":"How to use Google\u0027s mtail to parse log files and expose Prometheus-format metrics via a \/metrics endpoint, with mtail program syntax and Docker setup examples.","author":{"@type":"Person","name":""},"publisher":{"@type":"Organization","name":"tomato blog","url":"https:\/\/yuhi-sa.github.io\/"},"datePublished":"2023-11-24T09:00:23\u002b09:00","dateModified":"2026-02-14T00:31:41\u002b09:00","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/yuhi-sa.github.io\/en\/posts\/20231124_mtail\/1\/"},"url":"https:\/\/yuhi-sa.github.io\/en\/posts\/20231124_mtail\/1\/","wordCount":480,"keywords":["Monitoring","Prometheus","Logging"],"articleSection":"Posts","inLanguage":"en","timeRequired":"PT3M"}</script><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel=stylesheet><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin=anonymous referrerpolicy=no-referrer><link href=https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css rel=stylesheet integrity=sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH crossorigin=anonymous><link rel=stylesheet href=/css/variables.min.de039aff98fb649abaf5fe23d3d4981f460573d7728709826e219c496c8e5be2.css integrity="sha256-3gOa/5j7ZJq69f4j09SYH0YFc9dyhwmCbiGcSWyOW+I=" crossorigin=anonymous><link rel=stylesheet href=/css/main.min.c50b1500452fdb66f687cdcbf45a7774123c0111e1054e26db51fee604557b28.css integrity="sha256-xQsVAEUv22b2h83L9Fp3dBI8ARHhBU4m21H+5gRVeyg=" crossorigin=anonymous><link rel=stylesheet href=/css/syntax.min.e379066489e20d5433ca35ac1f468fd9e8859705a62d77a79bb7379ac3613848.css integrity="sha256-43kGZIniDVQzyjWsH0aP2eiFlwWmLXenm7c3msNhOEg=" crossorigin=anonymous><style>body{font-family:-apple-system,BlinkMacSystemFont,inter,segoe ui,Roboto,sans-serif;line-height:1.5;color:#000;background:#fff}[data-theme=dark] body{color:#fff;background:#000}.container{max-width:768px;margin:0 auto;padding:0 1rem}</style><script src=https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js integrity=sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz crossorigin=anonymous defer></script><script src=/js/dark-mode.min.3e457dc8346f064bee795e6f9b73e1516dcd059e750c521fe4b445f9ea9a7821.js integrity="sha256-PkV9yDRvBkvueV5vm3PhUW3NBZ51DFIf5LRF+eqaeCE=" defer></script><script>window.addEventListener("load",function(){const e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-LN6QP6VVM3",document.head.appendChild(e),e.onload=function(){window.dataLayer=window.dataLayer||[];function e(){dataLayer.push(arguments)}e("js",new Date),e("config","G-LN6QP6VVM3")}})</script><script>"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("/sw.js").then(function(e){console.log("SW registered: ",e)}).catch(function(e){console.log("SW registration failed: ",e)})})</script></head><body itemscope itemtype=https://schema.org/WebPage class=theme-tomatohugo><a href=#main-content class="skip-link sr-only sr-only-focusable" aria-label="Skip to main content">Skip to main content</a><header role=banner class=site-header><nav class="navbar navbar-expand-lg navbar-light bg-light" role=navigation aria-label="Main navigation"><div class=container><a class=navbar-brand href=https://yuhi-sa.github.io/ aria-label="Return to tomato blog homepage">tomato blog
</a><button class="navbar-toggler d-lg-none" type=button data-bs-toggle=collapse data-bs-target=#navbarNav aria-controls=navbarNav aria-expanded=false aria-label="Toggle navigation menu">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarNav><ul class="navbar-nav ms-auto" role=menubar><li class=nav-item role=none><a class=nav-link href=https://yuhi-sa.github.io/en/ role=menuitem aria-label="Navigate to Blog">Blog</a></li><li class=nav-item role=none><a class=nav-link href=https://yuhi-sa.github.io/en/tags/ role=menuitem aria-label="Navigate to Tags">Tags</a></li><li class=nav-item role=none><a class=nav-link href=https://yuhi-sa.github.io/en/posts/about/ role=menuitem aria-label="Navigate to About">About</a></li><li class=nav-item role=none><a class=nav-link href=https://yuhi-sa.github.io/en/posts/privacy_policy/ role=menuitem aria-label="Navigate to Privacy policy">Privacy policy</a></li><li class=nav-item role=none><button id=darkModeToggle class="nav-link btn btn-link border-0" type=button role=menuitem aria-label="Toggle dark mode" title="Switch between light and dark themes">
<i class="fas fa-moon" id=darkModeIcon aria-hidden=true></i>
<span class="d-lg-none ms-2">ダークモード</span></button></li></ul></div></div></nav><script async src="https://www.googletagmanager.com/gtag/js?id=G-LN6QP6VVM3"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-LN6QP6VVM3")</script><script data-ad-client=ca-pub-9558545098866170 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></header><main id=main-content role=main class=site-main aria-label="Main content"><div class="container mt-4"><div class="row justify-content-center"><div class=col-lg-8><article itemscope itemtype=https://schema.org/Article><header class=article-header><h1 itemprop=headline>Generating Prometheus Metrics from Logs with mtail</h1><p class="lead article-description" itemprop=description>How to use Google's mtail to parse log files and expose Prometheus-format metrics via a /metrics endpoint, with mtail program syntax and Docker setup examples.</p><div class=article-meta><time datetime=2023-11-24T09:00:23+09:00 itemprop=datePublished><i class="far fa-calendar-alt me-1" aria-hidden=true></i>
November 24, 2023
</time><time datetime=2026-02-14T00:31:41+09:00 itemprop=dateModified class=ms-3><i class="far fa-edit me-1" aria-hidden=true></i>
Updated
February 14, 2026
</time><span aria-label="Reading time" class=ms-3><i class="far fa-clock me-1" aria-hidden=true></i>
3 min read</span></div><div class=article-tags role=group aria-label="Article tags"><a href=/en/tags/monitoring/ class="badge badge-custom text-decoration-none me-1" rel=tag itemprop=keywords>Monitoring
</a><a href=/en/tags/prometheus/ class="badge badge-custom text-decoration-none me-1" rel=tag itemprop=keywords>Prometheus
</a><a href=/en/tags/logging/ class="badge badge-custom text-decoration-none me-1" rel=tag itemprop=keywords>Logging</a></div></header><div class=article-content itemprop=articleBody><h2 id=overview>Overview</h2><p><a href=https://github.com/google/mtail>mtail</a> is an open-source log parsing tool developed by Google. It extracts lines matching specific patterns from log files, generates metrics based on them, and exposes them in <strong>Prometheus format</strong> at the <code>/metrics</code> endpoint. This enables collecting and monitoring business metrics and system state from existing logs using Prometheus.</p><h2 id=how-to-use-mtail>How to Use mtail</h2><p>To use mtail, you need to start the mtail program (daemon) and specify the log files to monitor and the mtail program (configuration file) that defines the metrics.</p><h3 id=mtail-program-configuration-file-example-samplemtail>mtail Program (Configuration File) Example: <code>sample.mtail</code></h3><p>mtail programs are written in a unique syntax similar to Go.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-zed data-lang=zed><span class=line><span class=cl><span class=err>#</span><span class=w> </span><span class=n>Metric</span><span class=w> </span><span class=kt>definition</span><span class=w> </span><span class=n>and</span><span class=w> </span><span class=n>initialization</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=err>#</span><span class=w> </span><span class=n>Define</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>counter</span><span class=o>-</span><span class=n>type</span><span class=w> </span><span class=n>metric</span><span class=w> </span><span class=n>named</span><span class=w> </span><span class=err>&#39;</span><span class=n>errors_total</span><span class=err>&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=n>counter</span><span class=w> </span><span class=n>errors_total</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=err>#</span><span class=w> </span><span class=n>Pattern</span><span class=w> </span><span class=n>matching</span><span class=w> </span><span class=n>rules</span><span class=w> </span><span class=n>within</span><span class=w> </span><span class=n>log</span><span class=w> </span><span class=n>files</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=err>#</span><span class=w> </span><span class=n>Increment</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>errors_total</span><span class=w> </span><span class=n>counter</span><span class=w> </span><span class=n>if</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>line</span><span class=w> </span><span class=n>contains</span><span class=w> </span><span class=err>&#34;</span><span class=n>error</span><span class=err>&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=o>/</span><span class=nn>error/</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>errors_total</span><span class=o>++</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=err>#</span><span class=w> </span><span class=n>Example</span><span class=o>:</span><span class=w> </span><span class=n>Count</span><span class=w> </span><span class=n>HTTP</span><span class=w> </span><span class=n>request</span><span class=w> </span><span class=n>status</span><span class=w> </span><span class=n>codes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=err>#</span><span class=w> </span><span class=n>Capture</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>status</span><span class=w> </span><span class=n>code</span><span class=w> </span><span class=n>using</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>regular</span><span class=w> </span><span class=n>expression</span><span class=w> </span><span class=n>and</span><span class=w> </span><span class=n>use</span><span class=w> </span><span class=n>it</span><span class=w> </span><span class=n>as</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>label</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=o>/^</span><span class=n>HTTP</span><span class=err>\</span><span class=o>/</span><span class=err>1\</span><span class=p>.[</span><span class=err>01</span><span class=p>]</span><span class=w> </span><span class=p>(</span><span class=err>\</span><span class=n>d</span><span class=p>{</span><span class=err>3</span><span class=p>})</span><span class=o>/</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>http_requests_total</span><span class=p>[</span><span class=err>$1</span><span class=p>]</span><span class=o>++</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=n>counter</span><span class=w> </span><span class=n>http_requests_total</span><span class=w> </span><span class=n>by</span><span class=w> </span><span class=n>status_code</span><span class=w>
</span></span></span></code></pre></div><ul><li><code>counter errors_total</code>: Defines a metric for use with Prometheus. <code>counter</code> is a counter-type metric whose value monotonically increases.</li><li><code>/error/ { errors_total++ }</code>: When each log line matches the regular expression <code>/error/</code>, the <code>errors_total</code> counter is incremented by 1.</li><li><code>counter http_requests_total by status_code</code>: Defines a counter metric called <code>http_requests_total</code> with a <code>status_code</code> label.</li><li><code>/^HTTP\/1\.[01] (\d{3})/ { http_requests_total[$1]++ }</code>: Extracts status codes (e.g., 200, 404, 500) from HTTP access logs and increments the <code>http_requests_total</code> counter using the status code as a label.</li></ul><h2 id=running-mtail-with-docker>Running mtail with Docker</h2><p>By running mtail as a Docker container, you can simplify environment setup and deployment.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dockerfile data-lang=dockerfile><span class=line><span class=cl><span class=c># Use CentOS 7 as base image</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=k>FROM</span><span class=w> </span><span class=s>centos:7</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=c># Install wget and clean cache</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=k>RUN</span> yum install -y wget <span class=o>&amp;&amp;</span> yum clean all<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=c># Set working directory to /tmp</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=k>WORKDIR</span><span class=w> </span><span class=s>/tmp</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=c># Download mtail binary, extract, and grant execute permission</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=c># Update the release version to the latest as needed</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=k>RUN</span> wget -O mtail.tar.gz https://github.com/google/mtail/releases/download/v3.0.0-rc52/mtail_3.0.0-rc52_linux_amd64.tar.gz <span class=o>&amp;&amp;</span> <span class=se>\
</span></span></span><span class=line><span class=cl>    tar xzvf mtail.tar.gz <span class=o>&amp;&amp;</span> <span class=se>\
</span></span></span><span class=line><span class=cl>    chmod +x mtail<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=c># Command to execute when the container starts</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=c># -progs: Specify the path to the mtail program (configuration file)</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=c># -logs: Specify the path to the log file that mtail monitors</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=c># Example: CMD [&#34;/tmp/mtail&#34;, &#34;-progs&#34;, &#34;/etc/mtail/sample.mtail&#34;, &#34;-logs&#34;, &#34;/var/log/nginx/access.log&#34;]</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=k>CMD</span> <span class=p>[</span><span class=s2>&#34;/tmp/mtail&#34;</span><span class=p>,</span> <span class=s2>&#34;-progs&#34;</span><span class=p>,</span> <span class=s2>&#34;/path/to/sample.mtail&#34;</span><span class=p>,</span> <span class=s2>&#34;-logs&#34;</span><span class=p>,</span> <span class=s2>&#34;/path/to/logfile&#34;</span><span class=p>]</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=c># Default port where mtail exposes metrics (port for Prometheus to scrape)</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=k>EXPOSE</span><span class=w> </span><span class=s>3903</span><span class=err>
</span></span></span></code></pre></div><h3 id=cmd-instruction-arguments><code>CMD</code> Instruction Arguments</h3><ul><li><code>-progs /path/to/sample.mtail</code>: Specifies the path to the configuration file (mtail program) that mtail uses. Specify the path to the mtail program placed inside the container.</li><li><code>-logs /path/to/logfile</code>: Specifies the path to the log file that mtail monitors. mtail watches this log file, detects lines matching the patterns defined in the configuration, and generates corresponding metrics. This log file needs to be provided inside the container using Docker volume mounts, for example.</li></ul><p>By building and running this Docker image, mtail will monitor logs and expose metrics that Prometheus can collect.</p></div><footer class=article-footer></footer><meta itemprop=wordCount content="480"><meta itemprop=url content="https://yuhi-sa.github.io/en/posts/20231124_mtail/1/"></article><nav class="post-nav mt-5" aria-label="Post navigation"><a href=/en/posts/20231124_t3/1/ class="post-nav__item post-nav__item--prev"><span class="post-nav__label text-muted"><i class="fas fa-arrow-left me-1" aria-hidden=true></i>前の記事
</span><span class=post-nav__title>Technical Challenges of Sharing prom-client Metrics Between Next.js App Router and Pages Router</span>
</a><a href=/en/posts/20231204_git/1/ class="post-nav__item post-nav__item--next"><span class="post-nav__label text-muted">次の記事<i class="fas fa-arrow-right ms-1" aria-hidden=true></i>
</span><span class=post-nav__title>Preventing Direct Push to Main Branch Using Git Hooks</span></a></nav><section class="related-posts mt-5" aria-label="Related posts"><h2 class=related-posts__title>関連記事</h2><div class=related-posts__grid><article class=related-posts__item><h3 class=related-posts__item-title><a href=/en/posts/20231124_t3/1/>Technical Challenges of Sharing prom-client Metrics Between Next.js App Router and Pages Router</a></h3><div class=card-meta><time datetime=2023-11-24>November 24, 2023</time></div></article></div></section><nav class="article-navigation mt-4" aria-label="Article navigation"><a href=/en/posts/ class="btn btn-outline-secondary btn-sm mb-3"><i class="fas fa-arrow-left me-1" aria-hidden=true></i>
Back to posts</a><nav aria-label="Breadcrumb navigation" class=breadcrumb-nav role=navigation><ol class=breadcrumb itemscope itemtype=https://schema.org/BreadcrumbList><li class=breadcrumb-item itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a href=/en/ itemprop=item aria-label="Navigate to homepage"><i class="fas fa-home" aria-hidden=true></i>
<span itemprop=name>tomato blog</span>
</a><meta itemprop=position content="1"></li><li class=breadcrumb-item itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a href=https://yuhi-sa.github.io/en/ itemprop=item aria-label="Navigate to tomato blog"><span itemprop=name>tomato blog</span>
</a><meta itemprop=position content="2"></li><li class=breadcrumb-item itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a href=https://yuhi-sa.github.io/en/posts/ itemprop=item aria-label="Navigate to Posts"><span itemprop=name>Posts</span>
</a><meta itemprop=position content="3"></li><li class="breadcrumb-item active" aria-current=page itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><span itemprop=name>Generating Prometheus Metrics from Logs with mtail</span>
<meta itemprop=position content="4"></li></ol></nav></nav></div></div></div></main><footer role=contentinfo class=site-footer><div class="container pt-4 pb-3" style="border-top:2px solid var(--accent,#e54d2e)"><div class="row justify-content-center"><div class="col-md-8 text-center"><p class="copyright-text text-muted mb-2">&copy;
2026
tomato blog.
All rights reserved.</p><p class="theme-attribution text-muted small mt-2 mb-0">Powered by
<a href=https://gohugo.io/ target=_blank rel=noopener class=text-decoration-none>Hugo</a>
with
<a href=https://github.com/yuhi-sa/tomatohugo target=_blank rel=noopener class=text-decoration-none>TomatoHugo</a></p></div></div></div></footer><script src=https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js integrity=sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz crossorigin=anonymous defer></script><script src=/js/dark-mode.min.3e457dc8346f064bee795e6f9b73e1516dcd059e750c521fe4b445f9ea9a7821.js integrity="sha256-PkV9yDRvBkvueV5vm3PhUW3NBZ51DFIf5LRF+eqaeCE=" defer></script><script>window.addEventListener("load",function(){const e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-LN6QP6VVM3",document.head.appendChild(e),e.onload=function(){window.dataLayer=window.dataLayer||[];function e(){dataLayer.push(arguments)}e("js",new Date),e("config","G-LN6QP6VVM3")}})</script><script>"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("/sw.js").then(function(e){console.log("SW registered: ",e)}).catch(function(e){console.log("SW registration failed: ",e)})})</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"WebPage","name":"Generating Prometheus Metrics from Logs with mtail","url":"https:\/\/yuhi-sa.github.io\/en\/posts\/20231124_mtail\/1\/","description":"How to use Google\u0027s mtail to parse log files and expose Prometheus-format metrics via a \/metrics endpoint, with mtail program syntax and Docker setup examples.","inLanguage":"en","isPartOf":{"@type":"WebSite","name":"tomato blog","url":"https:\/\/yuhi-sa.github.io\/"}}</script></body></html>